<!-- ESTE VIEW ES COMO EL PRINCIPAL , EL DEFAULT , CUALQUIER COSA QUE LE HAGAMOS AQUI SE VA A VER EN LA MAYORIA DE PAGINAS -->



@using PURIS_FLASH.Models.ViewModel

@{
    ViewBag.Title = "Home Page";
    var usuario = Session["UsuarioActual"] as UsersViewModel; // NECESARIO PARA JALAR LA INFORMACOIN DEL USUARIO


}

<style>
    .carrito-icono {
        margin-right: 33px;
    }


    .bg-light {
        --bs-bg-opacity: 0;
    }


    .rounded-circle {
        border-radius: 50% !important;
        background-color: transparent !important;
    }

    a {
        color: white !important;
    }

    .d-flex align-items-center {
        flex-direction: column;
        align-items: center;
    }

    .boton-KREAM {
        text-decoration: none;
        font-weight: 900;
        margin: 10;
    }

    .tipo-usuario {
        flex-direction: row-reverse !important;
    }



    .button-49,
    .button-49:after {
        height: auto;
        width: 60px;
        line-height: 78px;
        font-size: 20px;
        font-family: 'Bebas Neue', sans-serif;
        background: linear-gradient(45deg, transparent 5%, #FF013C 5%);
        border: 0;
        color: #fff;
        letter-spacing: 3px;
        box-shadow: 6px 0px 0px #00E6F6;
        outline: transparent;
        position: relative;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
    }

        .button-49:after {
            --slice-0: inset(50% 50% 50% 50%);
            --slice-1: inset(80% -6px 0 0);
            --slice-2: inset(50% -6px 30% 0);
            --slice-3: inset(10% -6px 85% 0);
            --slice-4: inset(40% -6px 43% 0);
            --slice-5: inset(80% -6px 5% 0);
            content: 'S A L I R';
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 3%, #00E6F6 3%, #00E6F6 5%, #FF013C 5%);
            text-shadow: -3px -3px 0px #F8F005, 3px 3px 0px #00E6F6;
            clip-path: var(--slice-0);
        }

        .button-49:hover:after {
            animation: 1s glitch;
            animation-timing-function: steps(2, end);
        }

    @@keyframes glitch {
        0% {
            clip-path: var(--slice-1);
            transform: translate(-20px, -10px);
        }

        10% {
            clip-path: var(--slice-3);
            transform: translate(10px, 10px);
        }

        20% {
            clip-path: var(--slice-1);
            transform: translate(-10px, 10px);
        }

        30% {
            clip-path: var(--slice-3);
            transform: translate(0px, 5px);
        }

        40% {
            clip-path: var(--slice-2);
            transform: translate(-5px, 0px);
        }

        50% {
            clip-path: var(--slice-3);
            transform: translate(5px, 0px);
        }

        60% {
            clip-path: var(--slice-4);
            transform: translate(5px, 10px);
        }

        70% {
            clip-path: var(--slice-2);
            transform: translate(-10px, 10px);
        }

        80% {
            clip-path: var(--slice-5);
            transform: translate(20px, -10px);
        }

        90% {
            clip-path: var(--slice-1);
            transform: translate(-10px, 0px);
        }

        100% {
            clip-path: var(--slice-1);
            transform: translate(0);
        }
    }

    @@media (min-width: 768px) {
        .button-49,
        .button-49:after {
            width: 200px;
            height: 86px;
            line-height: 88px;
        }
    }


    .button-49-fix {
        height: auto !important;
        width: 20% !important;
    }



    /*CLASE PRINCIPAL DEL NAV BAR */

    .navbar {
        background-color: #54c47c;
        color: white;
    }

    .navbar-toggler {
        background-color: #1c8454;
    }

    .navbar-toggler-icon {
        background-color: #1c8454;
    }

    .navbar-nav .nav-link {
        color: white;
    }

    .dropdown-menu {
        background-color: #1c8454;
    }

        .dropdown-menu .dropdown-item {
            color: white;
        }

    .navbar-nav .nav-link:hover {
        background-color: #1c8454;
    }

    .contador-carrito {
        font-size: large !important;
        background-color: transparent !important;
        position: absolute !important;
        margin-left: 24px;
        top: 2px;
        text-align: center;
        width: 30px;
    }

    .dropdown-menu {
        background-color: #fff;
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }

        .dropdown-menu .dropdown-item {
            color: #333;
        }

            .dropdown-menu .dropdown-item:hover {
                background-color: #54c47c;
            }

    .dropdown-divider {
        border-top-color: #ddd;
    }

    .navbar-nav {
        justify-content: space-between;
    }

    .admin-options {
        display: flex;
        justify-content: center;
    }
</style>





<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Mi aplicación ASP.NET</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>


</head>
<body style="padding: 0px">


    <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light" style="border-bottom: 2px solid #a9a7a2bc; padding-bottom: 0px; padding-top: 0px">
        <a class="boton-KREAM d-flex align-items-center" href="@Url.Action("Index", "Home")" style="text-decoration:none;">
            Destinos Caribe
        </a>
        <div class="container" style="font-family: Staatliches">
            <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" title="Alternar navegación" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse d-sm-inline-flex justify-content-between">
                <ul class="tipo-usuario navbar-nav flex-grow-1 boton-por-tipo admin-options">
                    @if (ViewContext.RouteData.Values["controller"].ToString().Equals("Home", StringComparison.OrdinalIgnoreCase)
                        && ViewContext.RouteData.Values["action"].ToString().Equals("Index", StringComparison.OrdinalIgnoreCase))
                    {
                        if (ViewBag.TipoUsuario == 1) // ADMIN
                        {
                            <li>@Html.ActionLink("Admin Usuarios", "Index", "Admin", new { area = "" }, new { @class = "nav-link" })</li>
                            <li>@Html.ActionLink("Admin Productos", "Index", "Vendedor", new { area = "" }, new { @class = "nav-link" })</li>
                            <li>@Html.ActionLink("Admin Repartidores", "MostrarInformacion", "Hoteles", new { area = "" }, new { @class = "nav-link" })</li>
                        }
                        else if (ViewBag.TipoUsuario == 2) // COMPRADOR
                        {

                            <li>@Html.ActionLink("Repartidores", "Index", "Hoteles", new { area = "" }, new { @class = "nav-link" })</li>

                        }
                    }<!-- fin del if para HOME INDEX PRINCIPAL -->

                </ul>

                @if (Session["UsuarioActual"] != null)
                {

                    <div class="d-flex align-items-center ml-auto">
                        <!-- Icono de carrito -->
                        <div class="carrito-icono">
                            <a href="@Url.Action("Index", "Carrito")" class="d-flex align-items-center">
                                <!-- Contenido del icono de carrito -->
                                @{
                                    var productosEnCarritoIds = new List<int>();
                                    if (!string.IsNullOrEmpty(usuario?.ProductosEnCarrito))
                                    {
                                        productosEnCarritoIds = usuario.ProductosEnCarrito.Split(',').Select(int.Parse).ToList();
                                    }
                                }
                                <span id="carritoBadge" class="contador-carrito bg-light text-dark rounded-circle">
                                    @productosEnCarritoIds.Count
                                </span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-cart-fill" viewBox="0 0 16 16">
                                    <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"></path>
                                </svg>
                            </a>
                        </div>
                        <!-- Icono de usuario -->
                        <div class="dropdown">
                            <button id="dropdownMenuButton" class="btn btn-secondary" aria-expanded="false" style="margin-right: 130px">
                                <i class="bi bi-person-circle"></i> @ViewBag.UserSession
                            </button>


                            <ul id="userDropdown" class="dropdown-menu" aria-labelledby="dropdownMenuButton">


                                <li><a class="dropdown-item mt-2" style="color:black !important" href="@Url.Action("Edit", "User", new { Id = usuario.Id })">Actualizar Perfil</a></li>
                                                                                                                                       <!--aqui pasamos como parametro el ID para saber a quien vamos a editar-->


                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item mt-2" style="color:black !important" href="@Url.Action("Logout", "Login")">Cerrar sesión</a></li>
                            </ul>
                        </div>
                    </div>


                }


            </div>
        </div>
    </nav>
    <div class="container body-content">
        @RenderBody()
        <hr />
        <footer style="margin: 0px;">
        </footer>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")

    <script>
        // Manejador de evento de clic para mostrar/ocultar el menú desplegable
        document.getElementById('dropdownMenuButton').addEventListener('click', function () {
            var dropdown = document.getElementById('userDropdown');
            if (dropdown.style.display === 'block') {
                dropdown.style.display = 'none';
            } else {
                dropdown.style.display = 'block';
            }
        });
    </script>
</body>
</html>




